
# Пепи Фашнель

Ритм-игра и поэтический перформанс, в которой игрок вставляет ритмические слова-инструменты в классические стихи.

## Архитектура проекта

### Структура директорий

```
├── core/              # Бизнес-логика игры
│   ├── scoring.ts     # Подсчет очков согласно ТЗ
│   ├── combo.ts       # Комбо-система
│   ├── economy.ts     # Экономика (Score → Coins)
│   └── rhythm.ts      # Ритмическая система
├── components/        # React компоненты
│   ├── GameView.tsx   # Игровой экран
│   ├── Shop.tsx       # Магазин
│   └── Button.tsx     # Кнопка
├── hooks/             # React хуки
│   └── useGameState.ts # Управление состоянием игры
├── services/          # Сервисы
│   ├── audioEngine.ts # Аудио движок
│   └── yandexStorage.ts # Хранилище Яндекс.Игры
├── constants.tsx      # Константы игры
├── types.ts          # TypeScript типы
└── App.tsx           # Главный компонент
```

### Модули

#### `core/scoring.ts`
Подсчет очков согласно ТЗ:
- BaseInsertScore = 100
- Модификаторы: Timing, Rhythm, Overlap, Combo
- Формула: `BaseInsertScore × Timing × Rhythm × Overlap × Combo`

#### `core/combo.ts`
Комбо-система согласно ТЗ:
- Формула: `1 + (ComboLength - 1) × 0.35`
- Максимум: 4
- Правила: разные слова, хороший тайминг, без больших пауз

#### `core/economy.ts`
Экономика согласно ТЗ:
- Формула: `Coins = sqrt(TotalScore) × DifficultyFactor`
- Коэффициенты: Easy=0.6, Medium=1.0, Hard=1.4

#### `core/rhythm.ts`
Ритмическая система:
- BPM: 96
- Размер: 4/4
- Минимальная единица: 1/8

## Соответствие ТЗ

### ✅ Слова-инструменты (MVP)
- пэпэ (бесплатно)
- фаа (40 Coins)
- втфа (90 Coins)
- шнейне (160 Coins)

### ✅ Уровни сложности
- Лёгкий: 1-2 четверостишия, коэффициент 0.6
- Средний: 4-6 четверостиший, коэффициент 1.0, цена 120 Coins
- Сложный: весь стих, коэффициент 1.4, цена 300 Coins

### ✅ Формулы
- Подсчет очков: согласно ТЗ
- Комбо: согласно ТЗ
- Экономика: согласно ТЗ

## Технологии

- React + TypeScript
- Tailwind CSS
- Vite
- Яндекс.Игры SDK
