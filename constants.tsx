
import { Difficulty, WordInstrument, Author, AuthorConfig, RhythmNotation, DifficultyConfig } from './types';

// Ритмические параметры согласно ТЗ
export const BPM = 96;
export const BEAT_DURATION = 60000 / BPM; // Длительность одного бита в мс
export const SUBDIVISION = 8; // Минимальная ритмическая единица: 1/8

// Слова-инструменты согласно ТЗ (MVP)
export const WORDS: (WordInstrument & { color: string })[] = [
  { 
    id: 'pepe', 
    text: 'пэпэ', 
    syllables: 2, 
    rhythm: '2×1/8', 
    character: 'БАЗА', 
    price: 0,
    pitch: 120, 
    color: '#D4AF37',
    description: '2 восьмых'
  },
  { 
    id: 'faa', 
    text: 'фаа', 
    syllables: 1, 
    rhythm: '1×1/4', 
    character: 'ВАААЙБ', 
    price: 40,
    pitch: 80, 
    color: '#32CD32',
    description: '1 четвертная'
  },
  { 
    id: 'wtfa', 
    text: 'втфа', 
    syllables: 2, 
    rhythm: '2×1/16', 
    character: 'Вопросительный вайб', 
    price: 90,
    pitch: 180, 
    color: '#FF1493',
    description: '2 шестнадцатых'
  },
  { 
    id: 'shneine', 
    text: 'шнэйне', 
    syllables: 2, 
    rhythm: '2×1/8', 
    character: 'Тяжелый вайб', 
    price: 160,
    pitch: 140, 
    color: '#1E90FF',
    description: '2 восьмых'
  },
];

// Конфигурация сложностей согласно ТЗ
export const DIFFICULTY_CONFIG: Record<Difficulty, DifficultyConfig> = {
  [Difficulty.EASY]: { 
    factor: 0.6, 
    label: 'ЛЁГКИЙ', 
    price: 0 
  },
  [Difficulty.MEDIUM]: { 
    factor: 1.0, 
    label: 'СРЕДНИЙ', 
    price: 120 // Средний уровень - 120 Coins
  },
  [Difficulty.HARD]: { 
    factor: 1.4, 
    label: 'СЛОЖНЫЙ', 
    price: 300 // Сложный уровень - 300 Coins
  },
};

// Полный текст стиха "У лукоморья дуб зелёный"
export const POEM_LUKOMORYE = [
  ["У лукоморья дуб зелёный;",
  "Златая цепь на дубе том:",
  "И днём и ночью кот учёный",
  "Всё ходит по цепи кругом;",
  "Идёт направо — песнь заводит,",
  "Налево — сказку говорит.",
  "Там чудеса: там леший бродит,",
  "Русалка на ветвях сидит;"],
  ["Там на неведомых дорожках",
  "Следы невиданных зверей;",
  "Избушка там на курьих ножках",
  "Стоит без окон, без дверей;",
  "Там лес и дол видений полны;",
  "Там о заре прихлынут волны",
  "На брег песчаный и пустой,",
  "И тридцать витязей прекрасных",
  "Чредой из вод выходят ясных,",
  "И с ними дядька их морской;"],
  ["Там королевич мимоходом",
  "Пленяет грозного царя;",
  "Там в облаках перед народом",
  "Через леса, через моря",
  "Колдун несёт богатыря;",
  "В темнице там царевна тужит,",
  "А бурый волк ей верно служит;",
  "Там ступа с Бабою Ягой",
  "Идёт, бредёт сама собой;",
  "Там царь Кащей над златом чахнет;",
  "Там русский дух... там Русью пахнет!",
  "И там я был, и мёд я пил;",
  "У моря видел дуб зелёный;",
  "Под ним сидел, и кот учёный",
  "Свои мне сказки говорил."]
];

// Заглушки стихов для Есенина и Маяковского (временно)
// Структура: [легкий фрагмент, средний фрагмент, сложный фрагмент]
export const POEM_ESENIN = [
[  "Не жалею, не зову, не плачу,",
  "Все пройдет, как с белых яблонь дым.",
  "Увяданья золотом охваченный,",
  "Я не буду больше молодым.",
  "Ты теперь не так уж будешь биться,",
  "Сердце, тронутое холодком,",
  "И страна березового ситца",
  "Не заманит шляться босиком.",],
[  "Дух бродяжий! ты все реже, реже",
  "Расшевеливаешь пламень уст",
  "О моя утраченная свежесть,",
  "Буйство глаз и половодье чувств.",
  "Я теперь скупее стал в желаньях,",
  "Жизнь моя? иль ты приснилась мне?",
  "Словно я весенней гулкой ранью",
  "Проскакал на розовом коне.",],
[  "Все мы, все мы в этом мире тленны,",
  "Тихо льется с кленов листьев медь…",
  "Будь же ты вовек благословенно,",
  "Что пришло процвесть и умереть."]
];

export const POEM_MAYAKOVSKY = [
[  "Я сразу смазал карту будня,",
  "плеснувши краску из стакана;",
  "я показал на блюде студня",
  "косые скулы океана.",
  "На чешуе жестяной рыбы",
  "прочёл я зовы новых губ.",
  "А вы",
  "ноктюрн сыграть",
  "могли бы",
  "на флейте водосточных труб?"]
];

// Конфигурация авторов
export const AUTHORS_CONFIG: Record<Author, AuthorConfig> = {
  [Author.PUSHKIN]: {
    id: Author.PUSHKIN,
    name: 'Пушкин',
    displayName: 'Пушка!',
    poem: POEM_LUKOMORYE,
    style: 'классика • чёткий ритм • обучающий мир',
    price: 0, // Доступен сразу
    color: '#D4AF37'
  },
  [Author.ESENIN]: {
    id: Author.ESENIN,
    name: 'Есенин',
    displayName: 'Есенин Пэпе',
    poem: POEM_ESENIN,
    style: 'рваный ритм • эмоциональные слова • средняя сложность',
    price: 500,
    color: '#32CD32'
  },
  [Author.MAYAKOVSKY]: {
    id: Author.MAYAKOVSKY,
    name: 'Маяковский',
    displayName: 'Маяк WTF',
    poem: POEM_MAYAKOVSKY,
    style: 'агрессивный ритм • короткие слова • высокая сложность',
    price: 1000,
    color: '#FF1493'
  }
};

// Функция получения стиха для автора
// Возвращает массив фрагментов: [легкий, средний, сложный]
export function getPoemForAuthor(author: Author): string[][] {
  return AUTHORS_CONFIG[author].poem;
}
