
import { Difficulty, WordInstrument, Author, AuthorConfig } from './types';

// Ритмические параметры согласно ТЗ
export const BPM = 96;
export const BEAT_DURATION = 60000 / BPM; // Длительность одного бита в мс
export const SUBDIVISION = 8; // Минимальная ритмическая единица: 1/8

// Слова-инструменты согласно ТЗ (MVP)
export const WORDS: (WordInstrument & { color: string })[] = [
  { 
    id: 'pepe', 
    text: 'пэпэ', 
    syllables: 2, 
    rhythm: '2×1/8', 
    character: 'БАЗА', 
    price: 0, // Первое слово бесплатно
    pitch: 440, 
    color: '#D4AF37',
    description: 'Базовый ритм'
  },
  { 
    id: 'faa', 
    text: 'фаа', 
    syllables: 1, 
    rhythm: '1×1/4', 
    character: 'ВАААЙБ', 
    price: 40, // 2-е слово - 40 Coins
    pitch: 350, 
    color: '#32CD32',
    description: 'Длинный ритм'
  },
  { 
    id: 'wtfa', 
    text: 'втфа', 
    syllables: 2, 
    rhythm: '2×1/16', 
    character: 'Четкий вайб', 
    price: 90, // 3-е слово - 90 Coins
    pitch: 500, 
    color: '#FF1493',
    description: 'Острый ритм'
  },
  { 
    id: 'shneine', 
    text: 'шнейне', 
    syllables: 2, 
    rhythm: '2×1/8', 
    character: 'Тяжелый вайб', 
    price: 160, // 4-е слово - 160 Coins
    pitch: 220, 
    color: '#1E90FF',
    description: 'Тяжёлый ритм'
  },
];

// Конфигурация сложностей согласно ТЗ
export const DIFFICULTY_CONFIG = {
  [Difficulty.EASY]: { 
    stanzas: 1, // 1-2 четверостишия (4-8 строк)
    factor: 0.6, // Коэффициент для конвертации Score → Coins
    label: 'ЛЁГКИЙ', 
    price: 0 // Лёгкий уровень бесплатный
  },
  [Difficulty.MEDIUM]: { 
    stanzas: 4, // 4-6 четверостиший (16-24 строки)
    factor: 1.0, 
    label: 'СРЕДНИЙ', 
    price: 120 // Средний уровень - 120 Coins
  },
  [Difficulty.HARD]: { 
    stanzas: 15, // Весь стих (58 строк = ~15 четверостиший)
    factor: 1.4, 
    label: 'СЛОЖНЫЙ', 
    price: 300 // Сложный уровень - 300 Coins
  },
};

// Полный текст стиха "У лукоморья дуб зелёный"
export const POEM_LUKOMORYE = [
  "У лукоморья дуб зелёный;",
  "Златая цепь на дубе том:",
  "И днём и ночью кот учёный",
  "Всё ходит по цепи кругом;",
  "Идёт направо — песнь заводит,",
  "Налево — сказку говорит.",
  "Там чудеса: там леший бродит,",
  "Русалка на ветвях сидит;",
  "Там на неведомых дорожках",
  "Следы невиданных зверей;",
  "Избушка там на курьих ножках",
  "Стоит без окон, без дверей;",
  "Там лес и дол видений полны;",
  "Там о заре прихлынут волны",
  "На брег песчаный и пустой,",
  "И тридцать витязей прекрасных",
  "Чредой из вод выходят ясных,",
  "И с ними дядька их морской;",
  "Там королевич мимоходом",
  "Пленяет грозного царя;",
  "Там в облаках перед народом",
  "Через леса, через моря",
  "Колдун несёт богатыря;",
  "В темнице там царевна тужит,",
  "А бурый волк ей верно служит;",
  "Там ступа с Бабою Ягой",
  "Идёт, бредёт сама собой;",
  "Там царь Кащей над златом чахнет;",
  "Там русский дух... там Русью пахнет!",
  "И там я был, и мёд я пил;",
  "У моря видел дуб зелёный;",
  "Под ним сидел, и кот учёный",
  "Свои мне сказки говорил."
];

// Заглушки стихов для Есенина и Маяковского (временно)
export const POEM_ESENIN = [
  "Не жалею, не зову, не плачу,",
  "Всё пройдёт, как с белых яблонь дым.",
  "Увяданья золотом охваченный,",
  "Я не буду больше молодым.",
  "Ты теперь не так уж будешь биться,",
  "Сердце, тронутое холодком,",
  "И страна берёзового ситца",
  "Не заманит шляться босиком."
];

export const POEM_MAYAKOVSKY = [
  "А вы могли бы?",
  "Я сразу смазал карту будня,",
  "плеснувши краску из стакана;",
  "я показал на блюде студня",
  "косые скулы океана.",
  "На чешуе жестяной рыбы",
  "прочёл я зовы новых губ.",
  "А вы",
  "ноктюрн сыграть",
  "могли бы",
  "на флейте водосточных труб?"
];

// Конфигурация авторов
export const AUTHORS_CONFIG: Record<Author, AuthorConfig> = {
  [Author.PUSHKIN]: {
    id: Author.PUSHKIN,
    name: 'Пушкин',
    displayName: 'Пушка!',
    poem: POEM_LUKOMORYE,
    style: 'классика • чёткий ритм • обучающий мир',
    price: 0, // Доступен сразу
    color: '#D4AF37'
  },
  [Author.ESENIN]: {
    id: Author.ESENIN,
    name: 'Есенин',
    displayName: 'Есенин Пэпе',
    poem: POEM_ESENIN,
    style: 'рваный ритм • эмоциональные слова • средняя сложность',
    price: 500,
    color: '#32CD32'
  },
  [Author.MAYAKOVSKY]: {
    id: Author.MAYAKOVSKY,
    name: 'Маяковский',
    displayName: 'Маяк WTF',
    poem: POEM_MAYAKOVSKY,
    style: 'агрессивный ритм • короткие слова • высокая сложность',
    price: 1000,
    color: '#FF1493'
  }
};

// Функция получения стиха для автора
export function getPoemForAuthor(author: Author): string[] {
  return AUTHORS_CONFIG[author].poem;
}
